{% extends "base.html" %}
{% block title %}Autograde | Create Assignment{% endblock %}
{% block content %}
        <!-- Bootstrap CSS -->
        <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <!-- Font Awesome CSS -->
        <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css">
        <link rel="stylesheet" href="/static/css/create_assignment.css" />
        <main class="container">
            <h1 class="text-white">Create Assignment</h1>
            <form
                action="" method="post" class="my-4">
                <!-- <div class="main-div"> -->
                <div
                    class="main-div shadow shadow-box bg-white">
                    <!-- Assignment title -->
                    <div class="form-floating field">
                        <input class="form-control my-2" id="assignment-title" type="text" placeholder="Assignment Title" autocomplete="off">
                        <label for="assignment-title">Assignment Title</label>
                    </div>
                    <!-- Function name -->
                    <div class="form-floating field">
                        <input class="form-control my-2" id="func-name" type="text" placeholder="Function Name" autocomplete="off">
                        <label for="func-name">Function Name</label>
                    </div>
                    <!-- Parameters -->
                    <div class="form-floating field">
                        <input class="form-control my-2" id="params" type="text" placeholder="Parameters (comma separated)" autocomplete="off">
                        <label for="params">Parameters (comma separated)</label>
                    </div>
                    <!-- Marks -->
                    <div class="form-floating field">
                        <input class="form-control my-2" id="marks" type="number" placeholder="Marks" autocomplete="off" max="100" min="0" step="0.5">
                        <label for="marks">Marks</label>
                    </div>
                    <!-- Docstring -->
                    <div class="form-floating field">
                        <textarea class="form-control my-2" name="" id="docstring" cols="40" rows="5"></textarea>
                        <label for="docstring">Docstring</label>
                    </div>
                    <!-- Test Parameters -->
                    <div class="form-floating field">
                        <input class="form-control my-2" id="test-params" type="text" placeholder="Test Parameters" autocomplete="off">
                        <label for="test-params">Test Parameters</label>
                    </div>
                    <!-- Expected Value -->
                    <div class="form-floating field">
                        <input class="form-control my-2" id="ex-value" type="text" placeholder="Expected Value" autocomplete="off">
                        <label for="ex-value">Expected Value</label>
                    </div>
                    <button id="newTestCase" type="button" class="btn btn-outline-primary">New Test Case</button>
                    <button id="newFunction" type="button" class="btn btn-outline-secondary">New Function</button>
                </div>
                <div class="secondary">
                    <table class="table mt-4" id="confirmation-table">
                        <thead>
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">Function Name</th>
                                <th scope="col">Marks</th>
                                <th scope="col">Test Parameters</th>
                                <th scope="col">Expected Value</th>
                                <th scope="col">Edit</th>
                                <th scope="col">Delete</th>
                            </tr>
                        </thead>
                        <tbody id="table-body"></tbody>
                    </table>
                    <button class="btn btn-outline-success" type="submit">Create Template</button>
                </div>
            </form>
        </main>
        <script>
            var num = 1; // For numbering on the table
            function addIcon(style) {
                let icon = document.createElement("i");
                icon.classList.add("fas");
                icon.classList.add(style);
                icon.classList.add("icon-size");
                return icon;
            }
            function addColumn(type, content) {
                let col = document.createElement(type);
                col.innerHTML = `${content}`;
                return col;
            }
            document.getElementById("newTestCase").addEventListener("click", () => {
                // This event will clear the test cases and add them in the table
                // getting the values and clearing the fields
                let funcName = document.getElementById("func-name").value;
                let marks = document.getElementById("marks").value;
                let testParams = document.getElementById("test-params").value;
                let exValue = document.getElementById("ex-value").value;
                document.getElementById("test-params").value = "";
                document.getElementById("ex-value").value = "";

                let row = document.createElement("tr");


                let editColumn = document.createElement("td"); // edit
                let editBtn = document.createElement("button");
                editBtn.classList.add("btn");
                editBtn.classList.add("btn-outline-primary");
                editBtn.appendChild(addIcon("fa-edit"));
                editColumn.appendChild(editBtn);
                let delColumn = document.createElement("td"); // delete
                let detBtn = document.createElement("button");
                detBtn.classList.add("btn");
                detBtn.classList.add("btn-outline-danger");
                detBtn.appendChild(addIcon("fa-trash-alt"));
                delColumn.appendChild(detBtn);

                row.appendChild(addColumn("th", num));
                row.appendChild(addColumn("td", funcName));
                row.appendChild(addColumn("td", marks));
                row.appendChild(addColumn("td", testParams));
                row.appendChild(addColumn("td", exValue));
                row.appendChild(editColumn);
                row.appendChild(delColumn);
                document.getElementById("table-body").appendChild(row);
                num++;
            });
            document.getElementById("newFunction").addEventListener("click", () => {
                document.getElementById("func-name").value = "";
                document.getElementById("params").value = "";
                document.getElementById("docstring").value = "";
                document.getElementById("marks").value = "";
                document.getElementById("test-params").value = "";
                document.getElementById("ex-value").value = "";
            });
        </script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}
